id: file:///ines-core.yaml
name: ines-core
imports:
  - linkml:types
prefixes:
  # qudt: http://qudt.org/schema/qudt/           # Core QUDT schema (classes like QuantityValue, Unit)
  unit: http://qudt.org/vocab/unit/            # Individual units (MegaW-HR, Meter, etc.)
  # qkind: http://qudt.org/vocab/quantitykind/   # Quantity kinds (Energy, Length, Mass, etc.)
default_range: string

classes:
  Database:
    slots:
      - currency_year
      - entities

  entity:
    abstract: true
    description: abstract high-level class
    slots:
      - id
      - name
      - description

  node:
    is_a: entity
    abstract: true
    attributes:
      node_type:
        designates_type: true
        range: string
        description: balance, storage, commodity

  balance:
    is_a: node
    mixins:
      - HasFlow
      - HasPenalty

  storage:
    is_a: node
    mixins:
      - HasFlow
      - HasPenalty
      - HasInvestments
    slots:
      - storage_capacity
      - storages_existing
      - investment_cost

  commodity:
    is_a: node
    slots:
      - price_per_unit

  unit:
    is_a: entity
    mixins:
      - HasInvestments
    attributes:
      conversion_method:
        range: conversion_method_enum
        description: constant_efficiency
    slots:
      - efficiency
      - units_existing

  flow:
    abstract: true
    mixins:
      - HasProfiles
    slots:
      - source
      - sink
      - capacity
      - other_operational_cost
      - investment_cost
    unique_keys:
      source_sink:
        unique_key_slots:
          - source
          - sink

  unit__to_node:
    is_a: flow
    attributes:
      source:
        range: unit
      sink:
        range: node


  node__to_unit:
    is_a: flow
    attributes:
      source:
        range: node
      sink:
        range: unit

  link:
    is_a: entity
    mixins:
      - HasInvestments
    slot_usage:
      efficiency:
        range: EfficiencyValue
    slots:
      - node_A
      - node_B
      - efficiency
      - capacity
      - links_existing
      - investment_cost
    attributes:
      transfer_method:
        range: transfer_method_enum
        description: regular_linear

  solve_pattern:
    is_a: entity
    attributes:
      solve_mode:
        range: solve_model_enum
        description: single_solve
      start_time:
      duration:
      time_resolution:

  system:
    is_a: entity
    attributes:
      discount_rate:


  HasFlow:
    mixin: true
    attributes:
      flow_annual:
      flow_profile:
      flow_scaling_method:
        range: flow_scaling_method_enum
        description: use_profile_directly, scale_to_annual

  HasPenalty:
    mixin: true
    attributes:
      penalty_upward:
      penalty_downward:

  HasInvestments:
    mixin: true
    attributes:
      investment_method:
        range: investment_method_enum
        description: not_allowed, no_limits
      interest_rate:
      lifetime:

  HasProfiles:
    mixin: true
    attributes:
      profile_method:
        range: profile_method_enum
        description: upper_limit, lower_limit
      profile_limit_upper:
      profile_limit_lower:

  DirectionalValue:
    slots:
      - forward:
          range: float
          required: true
      - reverse:
          range: float
          required: true

slots:
  entities:
    range: entity
    multivalued: true
    description: "All entities in this database"
  currency_year:
    pattern: "^cur:[A-Z]{3}_\\d{4}$"  # e.g., "cur:USD_2023"
    description: "QUDT currency and reference year for all monetary values in the dataset"
    comments:
      - "Currency codes must exist in http://qudt.org/vocab/currency/"
      - "Validation requires external QUDT vocabulary check"
      - "Maybe LinkML could validate against external vocabulary, but perhaps not well supported yet."
  id:
    identifier: true
    description: "Unique identifier of the entity"
  name:
    description: "Name of the entity"
  description:
    description: "Description of the entity"
  efficiency:
    range: float
    annotations:
      qudt_unit: "unit:PERCENT"
  capacity:
    range: float
    annotations:
      qudt_unit: "unit:MegaW"
  storage_capacity:
    range: float
    annotations:
      qudt_unit: "unit:MegaW"
  storages_existing:
    range: float
    annotations:
      qudt_unit: "unit:UNITLESS"
  investment_cost:
    range: float
    description: "Price (in currency_year denomination) per kW"
  price_per_unit:
    range: float
    description: "Price (in currency_year denomination) per unit of the product being bought or sold"
  units_existing:
    range: float
    annotations:
      qudt_unit: "unit:UNITLESS"
  other_operational_cost:
    range: float
    description: "Cost (in currency_year denomination) per unit of the product flowing through"
  source:
    range: unit and node
    description: "Source of the unidirectional flow"
  sink:
    range: unit and node
    description: "Sink of the unidirectional flow"
  node_A:
    range: node
    description: "First node of a bidirectional link"
  node_B:
    range: node
    description: "Second node of a bidirectional link"
  links_existing:
    range: float
    annotations:
      qudt_unit: "unit:UNITLESS"



types:
  EfficiencyValue:
    union_of:
      - float
      - DirectionalValue

enums:
  flow_scaling_method_enum:
    permissible_values:
      constant_efficiency

  conversion_method_enum:
    permissible_values:
      use_profile_directly
      scale_to_annual

  transfer_method_enum:
    permissible_values:
      regular_linear

  profile_method_enum:
    permissible_values:
      upper_limit
      lower_limit


